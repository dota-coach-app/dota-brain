//
// Steam guide ids of Dota Coach
//

const guideIds = [
  "2301488685",
  "2698376898",
  "2698377018",
  "2698377158",
  "2698377261",
  "2698377376",
  "2699915204",
  "2699915293",
  "2699915391",
  "2699915480",
  "2699915618",
  "2699915719",
  "2699915806",
  "2699915905",
  "2699915996",
  "2699916073",
  "2699916165",
  "2699916263",
  "2699916348",
  "2699916434",
  "2699916517",
  "2699916602",
  "2699916714",
  "2699917167",
  "2699917255",
  "2699917391",
  "2699919737",
  "2699919868",
  "2699933135",
  "2699934294",
  "2699955472",
  "2699957031",
  "2699957619",
  "2699957843",
  "2699957943",
  "2699958059",
  "2699958147",
  "2699958372",
  "2699958474",
  "2699958609",
  "2699958714",
  "2699958831",
  "2699958939",
  "2699959031",
  "2699959154",
  "2699959287",
  "2699959380",
  "2699959474",
  "2699959648",
  "2699959764",
  "2699959872",
  "2699960030",
  "2699960135",
  "2699960208",
  "2699960338",
  "2699960447",
  "2699960635",
  "2699960726",
  "2699960831",
  "2699960994",
  "2699961071",
  "2699961166",
  "2699961303",
  "2699961424",
  "2699961589",
  "2699961683",
  "2699961775",
  "2699961859",
  "2699961952",
  "2699962040",
  "2699962133",
  "2699962219",
  "2699962310",
  "2699962404",
  "2699962485",
  "2699962568",
  "2699962648",
  "2699962794",
  "2699962869",
  "2699962959",
  "2699963037",
  "2699963139",
  "2699963243",
  "2699963328",
  "2699963425",
  "2699963505",
  "2699963659",
  "2699963755",
  "2699963852",
  "2699963963",
  "2699964058",
  "2699964139",
  "2699964271",
  "2699964354",
  "2699964445",
  "2699964521",
  "2699964646",
  "2699964761",
  "2699964844",
  "2699964923",
  "2699965007",
  "2699965099",
  "2699965199",
  "2699965288",
  "2699965445",
  "2699965518",
  "2700561304",
  "2700561417",
  "2700561505",
  "2700561590",
  "2700561679",
  "2700561769",
  "2700561834",
  "2700561902",
  "2700561968",
  "2700562081",
  "2700562159",
  "2700562245",
  "2700562334",
  "2700562407",
  "2700562484",
  "2700562552",
  "2706431682",
  "2708440963",
  "2711948373",
  "2712384931",
  "2712385902",
  "2713377028",
  "2715010750",
  "2715221904",
  "2715224221",
  "2716646867",
  "2716646936",
  "2716647043",
  "2716647152",
  "2718158708",
  "2718666066",
  "2718666197",
  "2718666233",
  "2719253341",
  "2719253915",
  "2719254096",
  "2719254316",
  "2721136673",
  "2721136803",
  "2722413092",
  "2722413152",
  "2722413235",
  "2724416695",
  "2725332187",
  "2726399928",
  "2726400030",
  "2729200744",
  "2729201017",
  "2729605047",
  "2729605437",
  "2729605654",
  "2730985550",
  "2730986384",
  "2730986473",
  "2730987049",
  "2763260196",
  "2765463290",
  "2776661467",
  "2776954201",
  "2778135054",
  "2943493038",
  "2943887000",
  "2971195922",
  "2971195954",
];

//
// Actions to perform. Remove actions selectively, if desired
//

const actions = ["subscribe", "favorite", "voteup"];

//
// Tracking of results
//
const result = {
  subscribe: {
    success: 0,
    failure: 0,
  },
  favorite: {
    success: 0,
    failure: 0,
  },
  voteup: {
    success: 0,
    failure: 0,
  },
};

//
// Perform actions for all Dota Coach guides
//

const promises = [];
for (const guideId of guideIds) {
  for (const action of actions) {
    promises.push(
      fetch(`https://steamcommunity.com/sharedfiles/${action}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8",
        },
        body: `id=${guideId}&appid=570&sessionid=${g_sessionID}`,
      }).then((response) => {
        if (response.status === 200) {
          result[action].success++;
        } else {
          result[action].failure++;
        }
      })
    );
  }
}
await Promise.allSettled(promises);

// Dump results to console
result;
